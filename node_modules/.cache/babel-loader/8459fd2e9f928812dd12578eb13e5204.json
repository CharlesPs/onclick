{"ast":null,"code":"import FuseUtils from '@fuse/utils';\nimport history from '@history';\nimport _ from '@lodash';\nimport { showMessage } from 'app/store/actions/fuse';\nimport axios from 'axios';\nimport CardModel from '../../model/CardModel';\nimport ListModel from '../../model/ListModel';\nimport * as BoardsActions from './boards.actions';\nimport reorder, { reorderQuoteMap } from './reorder';\nexport var GET_BOARD = '[SCRUMBOARD APP] GET BOARD';\nexport var DELETE_BOARD = '[SCRUMBOARD APP] DELETE BOARD';\nexport var COPY_BOARD = '[SCRUMBOARD APP] COPY BOARD';\nexport var RENAME_BOARD = '[SCRUMBOARD APP] RENAME BOARD';\nexport var CHANGE_BOARD_SETTINGS = '[SCRUMBOARD APP] CHANGE BOARD SETTINGS';\nexport var RESET_BOARD = '[SCRUMBOARD APP] RESET BOARD';\nexport var ORDER_LIST = '[SCRUMBOARD APP] ORDER LIST';\nexport var ORDER_CARD = '[SCRUMBOARD APP] ORDER CARD';\nexport var ADD_CARD = '[SCRUMBOARD APP] ADD CARD';\nexport var ADD_LIST = '[SCRUMBOARD APP] ADD LIST';\nexport var ADD_LABEL = '[SCRUMBOARD APP] ADD LABEL';\nexport var RENAME_LIST = '[SCRUMBOARD APP] RENAME LIST';\nexport var REMOVE_LIST = '[SCRUMBOARD APP] REMOVE LIST';\nexport function getBoard(params) {\n  var request = axios.get('/api/scrumboard-app/board', {\n    params: params\n  });\n  return function (dispatch) {\n    return request.then(function (response) {\n      return dispatch({\n        type: GET_BOARD,\n        payload: response.data\n      });\n    }, function (error) {\n      dispatch(showMessage({\n        message: error.response.data,\n        autoHideDuration: 2000,\n        anchorOrigin: {\n          vertical: 'top',\n          horizontal: 'right'\n        }\n      }));\n      history.push({\n        pathname: '/apps/scrumboard/boards'\n      });\n    });\n  };\n}\nexport function resetBoard() {\n  return {\n    type: RESET_BOARD\n  };\n}\nexport function reorderList(result) {\n  return function (dispatch, getState) {\n    var board = getState().scrumboardApp.board;\n    var lists = board.lists;\n    var ordered = reorder(lists, result.source.index, result.destination.index);\n    var request = axios.post('/api/scrumboard-app/list/order', {\n      boardId: board.id,\n      lists: ordered\n    });\n    request.then(function (response) {\n      dispatch(showMessage({\n        message: 'List Order Saved',\n        autoHideDuration: 2000,\n        anchorOrigin: {\n          vertical: 'top',\n          horizontal: 'right'\n        }\n      }));\n    });\n    return dispatch({\n      type: ORDER_LIST,\n      payload: ordered\n    });\n  };\n}\nexport function reorderCard(result) {\n  return function (dispatch, getState) {\n    var board = getState().scrumboardApp.board;\n    var lists = board.lists;\n    var ordered = reorderQuoteMap(lists, result.source, result.destination);\n    var request = axios.post('/api/scrumboard-app/card/order', {\n      boardId: board.id,\n      lists: ordered\n    });\n    request.then(function (response) {\n      dispatch(showMessage({\n        message: 'Card Order Saved',\n        autoHideDuration: 2000,\n        anchorOrigin: {\n          vertical: 'top',\n          horizontal: 'right'\n        }\n      }));\n    });\n    return dispatch({\n      type: ORDER_CARD,\n      payload: ordered\n    });\n  };\n}\nexport function newCard(boardId, listId, cardTitle) {\n  var data = new CardModel({\n    name: cardTitle\n  });\n  var request = axios.post('/api/scrumboard-app/card/new', {\n    boardId: boardId,\n    listId: listId,\n    data: data\n  });\n  return function (dispatch) {\n    return new Promise(function (resolve, reject) {\n      request.then(function (response) {\n        resolve(response.data);\n        return dispatch({\n          type: ADD_CARD,\n          payload: response.data\n        });\n      });\n    });\n  };\n}\nexport function newList(boardId, listTitle) {\n  var data = new ListModel({\n    name: listTitle\n  });\n  var request = axios.post('/api/scrumboard-app/list/new', {\n    boardId: boardId,\n    data: data\n  });\n  return function (dispatch) {\n    return request.then(function (response) {\n      return dispatch({\n        type: ADD_LIST,\n        payload: response.data\n      });\n    });\n  };\n}\nexport function renameList(boardId, listId, listTitle) {\n  var request = axios.post('/api/scrumboard-app/list/rename', {\n    boardId: boardId,\n    listId: listId,\n    listTitle: listTitle\n  });\n  return function (dispatch) {\n    return request.then(function (response) {\n      return dispatch({\n        type: RENAME_LIST,\n        listId: listId,\n        listTitle: listTitle\n      });\n    });\n  };\n}\nexport function removeList(boardId, listId) {\n  var request = axios.post('/api/scrumboard-app/list/remove', {\n    boardId: boardId,\n    listId: listId\n  });\n  return function (dispatch) {\n    return request.then(function (response) {\n      return dispatch({\n        type: REMOVE_LIST,\n        listId: listId\n      });\n    });\n  };\n}\nexport function addLabel(label) {\n  return function (dispatch) {\n    return dispatch({\n      type: ADD_LABEL,\n      payload: label\n    });\n  };\n}\nexport function changeBoardSettings(newSettings) {\n  return function (dispatch, getState) {\n    var board = getState().scrumboardApp.board;\n\n    var settings = _.merge(board.settings, newSettings);\n\n    var request = axios.post('/api/scrumboard-app/board/settings/update', {\n      boardId: board.id,\n      settings: settings\n    });\n    return request.then(function (response) {\n      return dispatch({\n        type: CHANGE_BOARD_SETTINGS,\n        payload: response.data\n      });\n    });\n  };\n}\nexport function deleteBoard(boardId) {\n  var request = axios.post('/api/scrumboard-app/board/delete', {\n    boardId: boardId\n  });\n  return function (dispatch) {\n    return request.then(function (response) {\n      history.push({\n        pathname: '/apps/scrumboard/boards'\n      });\n      return dispatch({\n        type: DELETE_BOARD\n      });\n    });\n  };\n}\nexport function copyBoard(board) {\n  var newBoard = _.merge(board, {\n    id: FuseUtils.generateGUID(),\n    name: \"\".concat(board.name, \" (Copied)\"),\n    uri: \"\".concat(board.uri, \"-copied\")\n  });\n\n  return function (dispatch) {\n    dispatch(BoardsActions.newBoard(newBoard));\n    return {\n      type: COPY_BOARD\n    };\n  };\n}\nexport function renameBoard(boardId, boardTitle) {\n  var request = axios.post('/api/scrumboard-app/board/rename', {\n    boardId: boardId,\n    boardTitle: boardTitle\n  });\n  return function (dispatch) {\n    return request.then(function (response) {\n      return dispatch({\n        type: RENAME_BOARD,\n        boardTitle: boardTitle\n      });\n    });\n  };\n}","map":{"version":3,"sources":["/Users/msumaran/Documents/Proyectos/masternativos/src/app/scrumboard/store/actions/board.actions.js"],"names":["FuseUtils","history","_","showMessage","axios","CardModel","ListModel","BoardsActions","reorder","reorderQuoteMap","GET_BOARD","DELETE_BOARD","COPY_BOARD","RENAME_BOARD","CHANGE_BOARD_SETTINGS","RESET_BOARD","ORDER_LIST","ORDER_CARD","ADD_CARD","ADD_LIST","ADD_LABEL","RENAME_LIST","REMOVE_LIST","getBoard","params","request","get","dispatch","then","response","type","payload","data","error","message","autoHideDuration","anchorOrigin","vertical","horizontal","push","pathname","resetBoard","reorderList","result","getState","board","scrumboardApp","lists","ordered","source","index","destination","post","boardId","id","reorderCard","newCard","listId","cardTitle","name","Promise","resolve","reject","newList","listTitle","renameList","removeList","addLabel","label","changeBoardSettings","newSettings","settings","merge","deleteBoard","copyBoard","newBoard","generateGUID","uri","renameBoard","boardTitle"],"mappings":"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","sourcesContent":["import FuseUtils from '@fuse/utils';\nimport history from '@history';\nimport _ from '@lodash';\nimport { showMessage } from 'app/store/actions/fuse';\nimport axios from 'axios';\nimport CardModel from '../../model/CardModel';\nimport ListModel from '../../model/ListModel';\nimport * as BoardsActions from './boards.actions';\nimport reorder, { reorderQuoteMap } from './reorder';\n\n\nexport const GET_BOARD = '[SCRUMBOARD APP] GET BOARD';\nexport const DELETE_BOARD = '[SCRUMBOARD APP] DELETE BOARD';\nexport const COPY_BOARD = '[SCRUMBOARD APP] COPY BOARD';\nexport const RENAME_BOARD = '[SCRUMBOARD APP] RENAME BOARD';\nexport const CHANGE_BOARD_SETTINGS = '[SCRUMBOARD APP] CHANGE BOARD SETTINGS';\nexport const RESET_BOARD = '[SCRUMBOARD APP] RESET BOARD';\nexport const ORDER_LIST = '[SCRUMBOARD APP] ORDER LIST';\nexport const ORDER_CARD = '[SCRUMBOARD APP] ORDER CARD';\nexport const ADD_CARD = '[SCRUMBOARD APP] ADD CARD';\nexport const ADD_LIST = '[SCRUMBOARD APP] ADD LIST';\nexport const ADD_LABEL = '[SCRUMBOARD APP] ADD LABEL';\nexport const RENAME_LIST = '[SCRUMBOARD APP] RENAME LIST';\nexport const REMOVE_LIST = '[SCRUMBOARD APP] REMOVE LIST';\n\nexport function getBoard(params) {\n\tconst request = axios.get('/api/scrumboard-app/board', { params });\n\n\treturn dispatch =>\n\t\trequest.then(\n\t\t\tresponse =>\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: GET_BOARD,\n\t\t\t\t\tpayload: response.data\n\t\t\t\t}),\n\t\t\terror => {\n\t\t\t\tdispatch(\n\t\t\t\t\tshowMessage({\n\t\t\t\t\t\tmessage: error.response.data,\n\t\t\t\t\t\tautoHideDuration: 2000,\n\t\t\t\t\t\tanchorOrigin: {\n\t\t\t\t\t\t\tvertical: 'top',\n\t\t\t\t\t\t\thorizontal: 'right'\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\thistory.push({\n\t\t\t\t\tpathname: '/apps/scrumboard/boards'\n\t\t\t\t});\n\t\t\t}\n\t\t);\n}\n\nexport function resetBoard() {\n\treturn {\n\t\ttype: RESET_BOARD\n\t};\n}\n\nexport function reorderList(result) {\n\treturn (dispatch, getState) => {\n\t\tconst { board } = getState().scrumboardApp;\n\t\tconst { lists } = board;\n\n\t\tconst ordered = reorder(lists, result.source.index, result.destination.index);\n\n\t\tconst request = axios.post('/api/scrumboard-app/list/order', {\n\t\t\tboardId: board.id,\n\t\t\tlists: ordered\n\t\t});\n\n\t\trequest.then(response => {\n\t\t\tdispatch(\n\t\t\t\tshowMessage({\n\t\t\t\t\tmessage: 'List Order Saved',\n\t\t\t\t\tautoHideDuration: 2000,\n\t\t\t\t\tanchorOrigin: {\n\t\t\t\t\t\tvertical: 'top',\n\t\t\t\t\t\thorizontal: 'right'\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t});\n\n\t\treturn dispatch({\n\t\t\ttype: ORDER_LIST,\n\t\t\tpayload: ordered\n\t\t});\n\t};\n}\n\nexport function reorderCard(result) {\n\treturn (dispatch, getState) => {\n\t\tconst { board } = getState().scrumboardApp;\n\t\tconst { lists } = board;\n\n\t\tconst ordered = reorderQuoteMap(lists, result.source, result.destination);\n\n\t\tconst request = axios.post('/api/scrumboard-app/card/order', {\n\t\t\tboardId: board.id,\n\t\t\tlists: ordered\n\t\t});\n\n\t\trequest.then(response => {\n\t\t\tdispatch(\n\t\t\t\tshowMessage({\n\t\t\t\t\tmessage: 'Card Order Saved',\n\t\t\t\t\tautoHideDuration: 2000,\n\t\t\t\t\tanchorOrigin: {\n\t\t\t\t\t\tvertical: 'top',\n\t\t\t\t\t\thorizontal: 'right'\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t});\n\n\t\treturn dispatch({\n\t\t\ttype: ORDER_CARD,\n\t\t\tpayload: ordered\n\t\t});\n\t};\n}\n\nexport function newCard(boardId, listId, cardTitle) {\n\tconst data = new CardModel({ name: cardTitle });\n\t\n\tconst request = axios.post('/api/scrumboard-app/card/new', {\n\t\tboardId,\n\t\tlistId,\n\t\tdata\n\t});\n\treturn dispatch =>\n\t\tnew Promise((resolve, reject) => {\n\t\t\trequest.then(response => {\n\t\t\t\tresolve(response.data);\n\t\t\t\treturn dispatch({\n\t\t\t\t\ttype: ADD_CARD,\n\t\t\t\t\tpayload: response.data\n\t\t\t\t});\n\t\t\t});\n\t\t});\n}\n\nexport function newList(boardId, listTitle) {\n\tconst data = new ListModel({ name: listTitle });\n\n\tconst request = axios.post('/api/scrumboard-app/list/new', {\n\t\tboardId,\n\t\tdata\n\t});\n\n\treturn dispatch =>\n\t\trequest.then(response =>\n\t\t\tdispatch({\n\t\t\t\ttype: ADD_LIST,\n\t\t\t\tpayload: response.data\n\t\t\t})\n\t\t);\n}\n\nexport function renameList(boardId, listId, listTitle) {\n\tconst request = axios.post('/api/scrumboard-app/list/rename', {\n\t\tboardId,\n\t\tlistId,\n\t\tlistTitle\n\t});\n\n\treturn dispatch =>\n\t\trequest.then(response =>\n\t\t\tdispatch({\n\t\t\t\ttype: RENAME_LIST,\n\t\t\t\tlistId,\n\t\t\t\tlistTitle\n\t\t\t})\n\t\t);\n}\n\nexport function removeList(boardId, listId) {\n\tconst request = axios.post('/api/scrumboard-app/list/remove', {\n\t\tboardId,\n\t\tlistId\n\t});\n\n\treturn dispatch =>\n\t\trequest.then(response =>\n\t\t\tdispatch({\n\t\t\t\ttype: REMOVE_LIST,\n\t\t\t\tlistId\n\t\t\t})\n\t\t);\n}\n\nexport function addLabel(label) {\n\treturn dispatch => {\n\t\treturn dispatch({\n\t\t\ttype: ADD_LABEL,\n\t\t\tpayload: label\n\t\t});\n\t};\n}\n\nexport function changeBoardSettings(newSettings) {\n\treturn (dispatch, getState) => {\n\t\tconst { board } = getState().scrumboardApp;\n\t\tconst settings = _.merge(board.settings, newSettings);\n\t\tconst request = axios.post('/api/scrumboard-app/board/settings/update', {\n\t\t\tboardId: board.id,\n\t\t\tsettings\n\t\t});\n\n\t\treturn request.then(response =>\n\t\t\tdispatch({\n\t\t\t\ttype: CHANGE_BOARD_SETTINGS,\n\t\t\t\tpayload: response.data\n\t\t\t})\n\t\t);\n\t};\n}\n\nexport function deleteBoard(boardId) {\n\tconst request = axios.post('/api/scrumboard-app/board/delete', {\n\t\tboardId\n\t});\n\n\treturn dispatch =>\n\t\trequest.then(response => {\n\t\t\thistory.push({\n\t\t\t\tpathname: '/apps/scrumboard/boards'\n\t\t\t});\n\n\t\t\treturn dispatch({\n\t\t\t\ttype: DELETE_BOARD\n\t\t\t});\n\t\t});\n}\n\nexport function copyBoard(board) {\n\tconst newBoard = _.merge(board, {\n\t\tid: FuseUtils.generateGUID(),\n\t\tname: `${board.name} (Copied)`,\n\t\turi: `${board.uri}-copied`\n\t});\n\treturn dispatch => {\n\t\tdispatch(BoardsActions.newBoard(newBoard));\n\t\treturn { type: COPY_BOARD };\n\t};\n}\n\nexport function renameBoard(boardId, boardTitle) {\n\tconst request = axios.post('/api/scrumboard-app/board/rename', {\n\t\tboardId,\n\t\tboardTitle\n\t});\n\n\treturn dispatch =>\n\t\trequest.then(response =>\n\t\t\tdispatch({\n\t\t\t\ttype: RENAME_BOARD,\n\t\t\t\tboardTitle\n\t\t\t})\n\t\t);\n}\n"]},"metadata":{},"sourceType":"module"}