{"ast":null,"code":"import { showMessage } from 'app/store/actions/fuse';\nimport axios from 'axios';\nimport firebaseService from 'app/services/firebaseService';\nimport { getBoard } from './board.actions';\nexport var OPEN_CARD_DIALOG = '[SCRUMBOARD APP] OPEN CARD DIALOG';\nexport var CLOSE_CARD_DIALOG = '[SCRUMBOARD APP] CLOSE CARD DIALOG';\nexport var UPDATE_CARD = '[SCRUMBOARD APP] UPDATE CARD';\nexport var REMOVE_CARD = '[SCRUMBOARD APP] REMOVE CARD';\nexport function openCardDialog(data) {\n  return {\n    type: OPEN_CARD_DIALOG,\n    payload: data\n  };\n}\nexport function closeCardDialog() {\n  return {\n    type: CLOSE_CARD_DIALOG\n  };\n}\nexport function updateCard(boardId, card, list) {\n  console.log(card);\n  return function (dispatch, getState) {\n    firebaseService.db.ref(\"board/\".concat(boardId, \"/lists/\").concat(list.id, \"/cards/\").concat(card.id)).update(card).then(function () {\n      return dispatch(getBoard({\n        boardId: boardId\n      }));\n    }).catch(function (error) {\n      return {\n        errorCode: error.code,\n        errorMessage: error.message\n      };\n    });\n  };\n}\nexport function removeCard(boardId, cardId) {\n  return function (dispatch, getState) {\n    firebaseService.db.ref(\"board/\".concat(boardId, \"/cards/\").concat(cardId)).remove().then(function () {\n      Promise.all([dispatch({\n        type: REMOVE_CARD,\n        boardId: boardId,\n        cardId: cardId\n      })]).then(function () {\n        return dispatch(getBoard({\n          boardId: boardId\n        }));\n      });\n    }).catch(function (error) {\n      return {\n        errorCode: error.code,\n        errorMessage: error.message\n      };\n    });\n    var promises = [];\n    contactIds.forEach(function (element) {\n      promises.push(firebaseService.db.ref(\"board/\".concat(boardId, \"/cards/\").concat(cardId)).remove());\n    });\n    return Promise.all(promises).then(function (result) {\n      Promise.all([dispatch({\n        type: REMOVE_CARD,\n        boardId: boardId,\n        cardId: cardId\n      })]).then(function () {\n        return dispatch(getBoard({\n          boardId: boardId\n        }));\n      });\n    });\n  }; // return dispatch => {\n  //     const request = axios.post('/api/scrumboard-app/card/remove', {\n  //         boardId,\n  //         cardId\n  //     });\n  //     return request.then(response =>\n  //         dispatch({\n  //             type: REMOVE_CARD,\n  //             boardId,\n  //             cardId\n  //         })\n  //     );\n  // };\n}","map":{"version":3,"sources":["/Users/msumaran/Documents/Proyectos/masternativos/src/app/scrumboard/store/actions/card.actions.js"],"names":["showMessage","axios","firebaseService","getBoard","OPEN_CARD_DIALOG","CLOSE_CARD_DIALOG","UPDATE_CARD","REMOVE_CARD","openCardDialog","data","type","payload","closeCardDialog","updateCard","boardId","card","list","console","log","dispatch","getState","db","ref","id","update","then","catch","error","errorCode","code","errorMessage","message","removeCard","cardId","remove","Promise","all","promises","contactIds","forEach","element","push","result"],"mappings":"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","sourcesContent":["import { showMessage } from 'app/store/actions/fuse';\nimport axios from 'axios';\nimport firebaseService from 'app/services/firebaseService';\nimport { getBoard } from './board.actions';\nexport const OPEN_CARD_DIALOG = '[SCRUMBOARD APP] OPEN CARD DIALOG';\nexport const CLOSE_CARD_DIALOG = '[SCRUMBOARD APP] CLOSE CARD DIALOG';\nexport const UPDATE_CARD = '[SCRUMBOARD APP] UPDATE CARD';\nexport const REMOVE_CARD = '[SCRUMBOARD APP] REMOVE CARD';\n\nexport function openCardDialog(data) {\n    return {\n        type: OPEN_CARD_DIALOG,\n        payload: data\n    };\n}\n\nexport function closeCardDialog() {\n    return {\n        type: CLOSE_CARD_DIALOG\n    };\n}\n\nexport function updateCard(boardId, card, list) {\n    console.log(card);\n    return (dispatch, getState) => {\n        firebaseService.db.ref(`board/${boardId}/lists/${list.id}/cards/${card.id}`).update(card).then(() => {\n            return dispatch(getBoard({ boardId: boardId }));\n        }).catch(error => {\n            return {\n                errorCode: error.code,\n                errorMessage: error.message\n            }\n        });\n    };\n}\n\nexport function removeCard(boardId, cardId) {\n    return (dispatch, getState) => {\n        firebaseService.db.ref(`board/${boardId}/cards/${cardId}`).remove().then(() => {\n            Promise.all([\n                dispatch({\n                    type: REMOVE_CARD,\n                    boardId,\n                    cardId\n                })\n            ]).then(() => dispatch(getBoard({ boardId: boardId })));\n        }).catch(error => {\n            return {\n                errorCode: error.code,\n                errorMessage: error.message\n            }\n        });\n\n        let promises = [];\n        contactIds.forEach(element => {\n            promises.push(firebaseService.db.ref(`board/${boardId}/cards/${cardId}`).remove());\n        });\n\n        return Promise.all(promises).then(result => {\n            Promise.all([\n                dispatch({\n                    type: REMOVE_CARD,\n                    boardId,\n                    cardId\n                })\n            ]).then(() => dispatch(getBoard({ boardId: boardId })));\n        });\n    };\n    // return dispatch => {\n    //     const request = axios.post('/api/scrumboard-app/card/remove', {\n    //         boardId,\n    //         cardId\n    //     });\n\n    //     return request.then(response =>\n    //         dispatch({\n    //             type: REMOVE_CARD,\n    //             boardId,\n    //             cardId\n    //         })\n    //     );\n    // };\n}"]},"metadata":{},"sourceType":"module"}