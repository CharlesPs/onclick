{"ast":null,"code":"import _classCallCheck from \"/Users/msumaran/Documents/Proyectos/masternativos/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/msumaran/Documents/Proyectos/masternativos/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/database';\nimport config from './firebaseServiceConfig';\n\nvar FirebaseService = /*#__PURE__*/function () {\n  function FirebaseService() {\n    var _this = this;\n\n    _classCallCheck(this, FirebaseService);\n\n    this.snapshotToArray = function (snapshot) {\n      var returnArr = [];\n      console.log(snapshot);\n      snapshot.forEach(function (childSnapshot) {\n        var item = childSnapshot.val();\n        item.key = childSnapshot.key;\n        returnArr.push(item);\n      });\n      return returnArr;\n    };\n\n    this.getUserData = function (userId) {\n      if (!firebase.apps.length) {\n        return false;\n      }\n\n      return new Promise(function (resolve, reject) {\n        _this.db.ref(\"users/\".concat(userId)).once('value').then(function (snapshot) {\n          var user = snapshot.val();\n          resolve(user);\n        });\n      });\n    };\n\n    this.updateUserData = function (user) {\n      if (!firebase.apps.length) {\n        return false;\n      }\n\n      return _this.db.ref(\"users/\".concat(user.uid)).set(user);\n    };\n\n    this.onAuthStateChanged = function (callback) {\n      if (!_this.auth) {\n        return;\n      }\n\n      _this.auth.onAuthStateChanged(callback);\n    };\n\n    this.signOut = function () {\n      if (!_this.auth) {\n        return;\n      }\n\n      _this.auth.signOut();\n    };\n  }\n\n  _createClass(FirebaseService, [{\n    key: \"init\",\n    value: function init(success) {\n      if (Object.entries(config).length === 0 && config.constructor === Object) {\n        if (process.env.NODE_ENV === 'development') {\n          console.warn('Missing Firebase Configuration at src/app/services/firebaseService/firebaseServiceConfig.js');\n        }\n\n        success(false);\n        return;\n      }\n\n      if (firebase.apps.length) {\n        return;\n      }\n\n      firebase.initializeApp(config);\n      this.db = firebase.database();\n      this.auth = firebase.auth();\n      success(true);\n    }\n  }]);\n\n  return FirebaseService;\n}();\n\nvar instance = new FirebaseService();\nexport default instance;","map":{"version":3,"sources":["/Users/msumaran/Documents/Proyectos/masternativos/src/app/services/firebaseService/firebaseService.js"],"names":["firebase","config","FirebaseService","snapshotToArray","snapshot","returnArr","console","log","forEach","childSnapshot","item","val","key","push","getUserData","userId","apps","length","Promise","resolve","reject","db","ref","once","then","user","updateUserData","uid","set","onAuthStateChanged","callback","auth","signOut","success","Object","entries","constructor","process","env","NODE_ENV","warn","initializeApp","database","instance"],"mappings":";;AAAA,OAAOA,QAAP,MAAqB,cAArB;AACA,OAAO,eAAP;AACA,OAAO,mBAAP;AACA,OAAOC,MAAP,MAAmB,yBAAnB;;IAEMC,e;;;;;;SA4BFC,e,GAAkB,UAAAC,QAAQ,EAAI;AAC1B,UAAIC,SAAS,GAAG,EAAhB;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYH,QAAZ;AACAA,MAAAA,QAAQ,CAACI,OAAT,CAAiB,UAASC,aAAT,EAAwB;AACrC,YAAIC,IAAI,GAAGD,aAAa,CAACE,GAAd,EAAX;AACAD,QAAAA,IAAI,CAACE,GAAL,GAAWH,aAAa,CAACG,GAAzB;AAEAP,QAAAA,SAAS,CAACQ,IAAV,CAAeH,IAAf;AACH,OALD;AAOA,aAAOL,SAAP;AACH,K;;SAGDS,W,GAAc,UAAAC,MAAM,EAAI;AACpB,UAAI,CAACf,QAAQ,CAACgB,IAAT,CAAcC,MAAnB,EAA2B;AACvB,eAAO,KAAP;AACH;;AAED,aAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpC,QAAA,KAAI,CAACC,EAAL,CACKC,GADL,iBACkBP,MADlB,GAEKQ,IAFL,CAEU,OAFV,EAGKC,IAHL,CAGU,UAAApB,QAAQ,EAAI;AACd,cAAMqB,IAAI,GAAGrB,QAAQ,CAACO,GAAT,EAAb;AACAQ,UAAAA,OAAO,CAACM,IAAD,CAAP;AACH,SANL;AAOH,OARM,CAAP;AASH,K;;SAEDC,c,GAAiB,UAAAD,IAAI,EAAI;AACrB,UAAI,CAACzB,QAAQ,CAACgB,IAAT,CAAcC,MAAnB,EAA2B;AACvB,eAAO,KAAP;AACH;;AAED,aAAO,KAAI,CAACI,EAAL,CAAQC,GAAR,iBAAqBG,IAAI,CAACE,GAA1B,GAAiCC,GAAjC,CAAqCH,IAArC,CAAP;AACH,K;;SAEDI,kB,GAAqB,UAAAC,QAAQ,EAAI;AAC7B,UAAI,CAAC,KAAI,CAACC,IAAV,EAAgB;AACZ;AACH;;AACD,MAAA,KAAI,CAACA,IAAL,CAAUF,kBAAV,CAA6BC,QAA7B;AACH,K;;SAEDE,O,GAAU,YAAM;AACZ,UAAI,CAAC,KAAI,CAACD,IAAV,EAAgB;AACZ;AACH;;AACD,MAAA,KAAI,CAACA,IAAL,CAAUC,OAAV;AACH,K;;;;;yBA7EIC,O,EAAS;AAEV,UAAIC,MAAM,CAACC,OAAP,CAAelC,MAAf,EAAuBgB,MAAvB,KAAkC,CAAlC,IAAuChB,MAAM,CAACmC,WAAP,KAAuBF,MAAlE,EAA0E;AACtE,YAAIG,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,aAA7B,EAA4C;AACxCjC,UAAAA,OAAO,CAACkC,IAAR,CACI,6FADJ;AAGH;;AACDP,QAAAA,OAAO,CAAC,KAAD,CAAP;AACA;AACH;;AAED,UAAIjC,QAAQ,CAACgB,IAAT,CAAcC,MAAlB,EAA0B;AACtB;AACH;;AAGDjB,MAAAA,QAAQ,CAACyC,aAAT,CAAuBxC,MAAvB;AAEA,WAAKoB,EAAL,GAAUrB,QAAQ,CAAC0C,QAAT,EAAV;AAEA,WAAKX,IAAL,GAAY/B,QAAQ,CAAC+B,IAAT,EAAZ;AAEAE,MAAAA,OAAO,CAAC,IAAD,CAAP;AACH;;;;;;AAwDL,IAAMU,QAAQ,GAAG,IAAIzC,eAAJ,EAAjB;AAEA,eAAeyC,QAAf","sourcesContent":["import firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/database';\nimport config from './firebaseServiceConfig';\n\nclass FirebaseService {\n    init(success) {\n\n        if (Object.entries(config).length === 0 && config.constructor === Object) {\n            if (process.env.NODE_ENV === 'development') {\n                console.warn(\n                    'Missing Firebase Configuration at src/app/services/firebaseService/firebaseServiceConfig.js'\n                );\n            }\n            success(false);\n            return;\n        }\n\n        if (firebase.apps.length) {\n            return;\n        }\n\n\n        firebase.initializeApp(config);\n\n        this.db = firebase.database();\n\n        this.auth = firebase.auth();\n\n        success(true);\n    }\n\n\n    snapshotToArray = snapshot => {\n        var returnArr = [];\n        console.log(snapshot);\n        snapshot.forEach(function(childSnapshot) {\n            var item = childSnapshot.val();\n            item.key = childSnapshot.key;\n\n            returnArr.push(item);\n        });\n\n        return returnArr;\n    };\n\n\n    getUserData = userId => {\n        if (!firebase.apps.length) {\n            return false;\n        }\n\n        return new Promise((resolve, reject) => {\n            this.db\n                .ref(`users/${userId}`)\n                .once('value')\n                .then(snapshot => {\n                    const user = snapshot.val();\n                    resolve(user);\n                });\n        });\n    };\n\n    updateUserData = user => {\n        if (!firebase.apps.length) {\n            return false;\n        }\n\n        return this.db.ref(`users/${user.uid}`).set(user);\n    };\n\n    onAuthStateChanged = callback => {\n        if (!this.auth) {\n            return;\n        }\n        this.auth.onAuthStateChanged(callback);\n    };\n\n    signOut = () => {\n        if (!this.auth) {\n            return;\n        }\n        this.auth.signOut();\n    };\n}\n\nconst instance = new FirebaseService();\n\nexport default instance;"]},"metadata":{},"sourceType":"module"}